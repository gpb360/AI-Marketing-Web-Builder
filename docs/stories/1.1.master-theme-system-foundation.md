# Story 1.1: Master Theme System Foundation

## Status
Ready for Review

## Story
**As a** frontend developer,
**I want** a centralized theme system with consistent colors, spacing, and presets,
**so that** all components use unified styling and eliminate the current 50% theme inconsistency.

## Acceptance Criteria
1. Create /src/lib/theme.ts with master theme configuration
2. Define dark theme colors (primary: gray-900, secondary: gray-800, accent: yellow-400)
3. Define text colors (primary: white, secondary: gray-300, accent: yellow-400)
4. Define spacing system using 8px grid (padding and margins)
5. Create theme presets for common component combinations
6. Export theme utilities for easy component consumption
7. Include TypeScript interfaces for theme structure
8. Add theme validation utilities

## Tasks / Subtasks

- [x] Create master theme file structure (AC: 1)
  - [x] Create /src/lib/theme.ts file
  - [x] Set up TypeScript interfaces for theme structure
  - [x] Create base theme configuration object

- [x] Implement color system (AC: 2, 3)
  - [x] Define dark theme background colors (gray-900, gray-800)
  - [x] Define yellow brand accent color (yellow-400)
  - [x] Define text color hierarchy (white, gray-300, yellow-400)
  - [x] Ensure accessibility contrast ratios

- [x] Create spacing system (AC: 4)
  - [x] Define 8px grid-based spacing constants
  - [x] Create responsive padding utilities
  - [x] Create responsive margin utilities
  - [x] Ensure mobile-first responsive design

- [x] Build theme presets system (AC: 5)
  - [x] Create landingPage preset combining colors and spacing
  - [x] Create builderCanvas preset for canvas components
  - [x] Create navigation preset for navigation elements
  - [x] Create component preset utilities

- [x] Export utilities and interfaces (AC: 6, 7)
  - [x] Export all theme constants and utilities
  - [x] Create TypeScript interfaces for theme structure
  - [x] Document usage patterns and examples
  - [x] Ensure tree-shakable exports

- [x] Implement theme validation (AC: 8)
  - [x] Create theme structure validation utilities
  - [x] Add runtime theme validation functions
  - [x] Create development warnings for theme violations
  - [x] Document validation usage

## Dev Notes

### Project Context
This story addresses **Critical Issue #1** from the PO Master Checklist: 50% theme inconsistency crisis. The current system has components mixing light and dark themes, hardcoded colors, and inconsistent spacing that undermines professional appearance.

### Relevant Source Tree Information
- **Target File**: `/src/lib/theme.ts` (new file to create)
- **Integration Points**: All components in `/src/components/` will eventually use this system
- **Problematic Files**: `/src/app/(builder)/templates/page.tsx`, `/src/app/(builder)/canvas/page.tsx` contain hardcoded theme values
- **Existing Setup**: Project uses Tailwind CSS with Next.js 14 and TypeScript

### Technical Requirements
- **Framework Integration**: Must work seamlessly with existing Tailwind CSS setup
- **TypeScript Support**: Full TypeScript interfaces and type safety
- **Performance**: Must support tree-shaking for optimal bundle size
- **Accessibility**: All colors must meet WCAG 2.1 AA contrast requirements
- **Responsive Design**: Support mobile-first responsive spacing system

### Theme System Architecture
```typescript
// Expected theme structure
interface MasterTheme {
  colors: {
    background: { primary: string; secondary: string; accent: string };
    text: { primary: string; secondary: string; accent: string };
  };
  spacing: {
    component: { padding: string; margin: string };
  };
  presets: {
    landingPage: string;
    builderCanvas: string;
    navigation: string;
  };
}
```

### Current Problem Areas
- **50% theme inconsistency** documented in PRD Frontend Specifications
- **Hardcoded values** like `bg-white text-gray-900` need elimination
- **Brand disconnect** with inconsistent yellow accent usage
- **Component duplication** due to styling inconsistencies

### Testing

#### Test File Locations
- Primary: `src/lib/__tests__/theme.test.ts`
- Integration: `src/lib/__tests__/theme-integration.test.ts`

#### Testing Frameworks and Standards
- **Framework**: Jest with TypeScript support
- **Coverage Requirement**: 100% for theme configuration functions
- **Integration Testing**: Test with sample components to verify Tailwind class generation

#### Testing Requirements for This Story
- **Unit Tests**: Theme configuration validation, TypeScript compilation
- **Integration Tests**: Theme system integration with sample components  
- **Type Tests**: TypeScript interface validation
- **Visual Tests**: Theme consistency verification

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-01-XX | 1.0 | Initial story creation with comprehensive requirements | Scrum Master |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4 (claude-sonnet-4-20250514)

### Debug Log References
- Theme validation successful: All requirements passed
- TypeScript interfaces implemented and validated
- Theme system exports working correctly

### Completion Notes List
1. Successfully implemented all 8 acceptance criteria
2. Enhanced existing theme.ts with story requirements
3. Added TypeScript interfaces for theme structure
4. Implemented validation utilities with development warnings
5. Created comprehensive test suite with 100% requirement coverage
6. All theme validation checks pass
7. Backward compatibility maintained with existing components
8. File size optimized at 16KB - reasonable for comprehensive theme system

### File List
- **Modified**: `src/lib/theme.ts` - Enhanced master theme system with story requirements
- **Created**: `src/lib/__tests__/theme.test.ts` - Comprehensive unit tests
- **Created**: `src/lib/__tests__/theme-integration.test.ts` - Integration tests with React components
- **Created**: `src/lib/theme-validation.js` - Simple validation script for CI/CD

## QA Results
_To be populated by QA agent after implementation_